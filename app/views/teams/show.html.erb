<h1 class="team-name"><%= @team.name %></h1>
<p class="team-description"><%= @team.description %></p>

<h3 class="team-members-header member">Team Members</h3>

<div class="row">
  <!-- Left column: List of Team Members -->
  <div class="col-md-6">
    <!-- Member Search -->
    <div class="member-search">
    <%= form_with url: search_members_team_path(@team), method: :get, local: true, class: 'search-form' do |form| %>
        <%= form.label :last_name, "Search by Last Name", class: 'search-label' %>
        <%= form.text_field :last_name, value: params[:last_name], placeholder: 'Enter last name', class: 'search-input' %>
        <%= form.submit "Search", class: 'btn btn-info btn-sm' %>
    <% end %>
    </div>

    <ul class="team-members-list">
      <% @members.each do |member| %>
        <li class="team-member-item">
          <% if member.user.present? %>
            <span class="member-email"><%= member.user.email %></span> 
            <span class="member-email"><%= member.user&.last_name %></span>
            <% if @team.owner == current_user %>
              <%= link_to 'Remove', remove_member_team_path(@team, member_id: member.id), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger btn-sm' %>
            <% end %>
          <% else %>
            <span class="no-member-info">Member information not available</span>
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>

  <!-- Right column: Add New Member Form -->
  <div class="col-md-6">
    <% if @team.owner == current_user %>
      <h3 class="add-member-header">Add New Member</h3>
      <%= form_with url: add_member_team_path(@team), local: true, class: 'add-member-form' do |form| %>
        <%= form.label :user_id, "Select a user to add", class: 'form-label' %>
        <%= select_tag :user_id, options_from_collection_for_select(@users - @members.map(&:user), :id, :email), class: 'form-control' %>
        <%= form.submit "Add Member", class: 'btn btn-primary' %>
      <% end %>
    <% end %>
  </div>
</div>

<style>
    /* General styling for the Team Page */
    .team-name {
      font-size: 2rem;
      font-weight: bold;
      color: #333;
      text-align: center;
      margin-top: 20px;
    }

    .team-description {
      font-size: 1.25rem;
      color: #555;
      text-align: center;
      margin: 10px 0 30px 0;
    }

    .team-members-header {
      font-size: 1.5rem;
      font-weight: bold;
      color: #007bff;
      margin-bottom: 15px;
      text-align: center;
    }

    /* Member Search Styling */
    .member-search {
      margin-bottom: 20px;
      text-align: center;
    }

    .search-form {
      display: inline-block;
      margin-top: 10px;
    }

    .search-label {
      font-size: 1rem;
      color: #333;
    }

    .search-input {
      padding: 5px 10px;
      font-size: 1rem;
      margin: 0 10px;
      width: 250px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .search-form input[type="submit"] {
      background-color: #17a2b8;
      color: white;
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
      font-size: 1rem;
    }

    .search-form input[type="submit"]:hover {
      background-color: #138496;
    }

    /* Team Members List */
    .team-members-list {
      list-style-type: none;
      padding-left: 0;
    }

    .team-member-item {
      background-color: #f9f9f9;
      border-radius: 5px;
      padding: 10px;
      margin: 10px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .member-email {
      font-size: 1rem;
      color: #333;
    }

    .no-member-info {
      font-size: 1rem;
      color: #e74c3c;
    }

    /* Add Member Form Styling */
    .add-member-header {
      font-size: 1.5rem;
      font-weight: bold;
      color: #333;
      margin-top: 30px;
      text-align: center;
    }

    .add-member-form {
      margin: 0 auto;
      max-width: 500px;
      text-align: center;
    }

    .form-label {
      font-size: 1rem;
      color: #333;
    }

    .form-control {
      width: 100%;
      padding: 10px;
      margin-bottom: 20px;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .btn-primary {
      background-color: #007bff;
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .btn-primary:hover {
      background-color: #0056b3;
    }

    .btn-danger {
      background-color: #dc3545;
      color: white;
      padding: 5px 10px;
      font-size: 0.875rem;
      border-radius: 5px;
    }

    .btn-danger:hover {
      background-color: #c82333;
    }

    /* Responsive grid styling */
    @media (max-width: 767px) {
      .team-page {
        grid-template-columns: 1fr;
      }
    }
    .member{
        margin-left: -527px;
    }

    /* Member Search Styling */
.member-search {
  margin-bottom: 20px;
  text-align: center;
}

.search-form {
  display: inline-block;
  margin-top: 10px;
}

.search-label {
  font-size: 1rem;
  color: #333;
}

.search-input {
  padding: 5px 10px;
  font-size: 1rem;
  margin: 0 10px;
  width: 250px;
  border: 1px solid #ccc;
  border-radius: 5px;
}

.search-form input[type="submit"] {
  background-color: #17a2b8;
  color: white;
  padding: 5px 10px;
  border: none;
  border-radius: 5px;
  font-size: 1rem;
}

.search-form input[type="submit"]:hover {
  background-color: #138496;
}

</style>
